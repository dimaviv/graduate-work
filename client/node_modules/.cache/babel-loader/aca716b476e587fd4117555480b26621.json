{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/dimav/WebstormProjects/graduate-work/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/dimav/WebstormProjects/graduate-work/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/dimav/WebstormProjects/graduate-work/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import'bootstrap/dist/css/bootstrap.min.css';import{Container}from\"react-bootstrap\";import{NavLink,useLocation,useHistory}from\"react-router-dom\";import{LOGIN_ROUTE,REGISTRATION_ROUTE,QUESTIONS_ROUTE}from\"../utils/consts\";import{login,registration}from\"../http/userAPI\";import{observer}from\"mobx-react-lite\";import{Context}from\"../index\";import Button from\"react-bootstrap/Button\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=observer(function(){var _useContext=useContext(Context),user=_useContext.user;var location=useLocation();var history=useHistory();var isLogin=location.pathname===LOGIN_ROUTE;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var click=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isLogin){_context.next=7;break;}_context.next=4;return login(email,password);case 4:data=_context.sent;_context.next=10;break;case 7:_context.next=9;return registration(email,password);case 9:data=_context.sent;case 10:user.setUser(user);user.setIsAuth(true);history.push(QUESTIONS_ROUTE);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);//alert(\"Entered a wrong username or password\")\nalert(_context.t0.response.data.message);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function click(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-4\",children:isLogin?'Login':'Registration'}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"exampleInputPassword1\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),isLogin?/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(NavLink,{to:REGISTRATION_ROUTE,children:\"Sign Up\"})]}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Have an account? \",/*#__PURE__*/_jsx(NavLink,{to:LOGIN_ROUTE,children:\"Login\"})]}),/*#__PURE__*/_jsx(Button,{onClick:click,children:isLogin?'Login':'Sign Up'})]})});});export default Auth;","map":{"version":3,"names":["React","useState","useContext","Container","NavLink","useLocation","useHistory","LOGIN_ROUTE","REGISTRATION_ROUTE","QUESTIONS_ROUTE","login","registration","observer","Context","Button","Auth","user","location","history","isLogin","pathname","email","setEmail","password","setPassword","click","data","setUser","setIsAuth","push","alert","response","message","e","target","value"],"sources":["C:/Users/dimav/WebstormProjects/graduate-work/client/src/pages/Auth.js"],"sourcesContent":["import React, {useState, useContext} from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Container} from \"react-bootstrap\";\r\nimport {NavLink, useLocation, useHistory} from \"react-router-dom\";\r\nimport {LOGIN_ROUTE, REGISTRATION_ROUTE, QUESTIONS_ROUTE} from \"../utils/consts\";\r\nimport {login, registration} from \"../http/userAPI\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {Context} from  \"../index\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nconst Auth = observer(() => {\r\n    const {user} = useContext(Context)\r\n    const location = useLocation()\r\n    const history = useHistory()\r\n    const isLogin = location.pathname === LOGIN_ROUTE\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const click = async () => {\r\n        let data;\r\n        try {\r\n            if (isLogin){\r\n                data = await login(email, password);\r\n            }else{\r\n                data = await registration(email, password);\r\n            }\r\n            user.setUser(user)\r\n            user.setIsAuth(true)\r\n            history.push(QUESTIONS_ROUTE)\r\n        }catch (e){\r\n            //alert(\"Entered a wrong username or password\")\r\n            alert(e.response.data.message)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n        <form>\r\n            <h2 className=\"mt-4\">{isLogin ? 'Login' : 'Registration'}</h2>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"exampleInputEmail1\">Email address</label>\r\n                <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\"\r\n                       placeholder=\"Enter email\"\r\n                       value={email}\r\n                       onChange={e => setEmail(e.target.value)}\r\n                />\r\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone\r\n                        else.</small>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"exampleInputPassword1\">Password</label>\r\n                <input type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\"\r\n                value={password}\r\n                onChange={e => setPassword(e.target.value)}\r\n                />\r\n            </div>\r\n\r\n            {isLogin ?\r\n                <p>Don't have an account? <NavLink to={REGISTRATION_ROUTE}>Sign Up</NavLink></p>\r\n                :\r\n                <p>Have an account? <NavLink to={LOGIN_ROUTE}>Login</NavLink></p>}\r\n            <Button\r\n            onClick={click}\r\n            >{isLogin ? 'Login' : 'Sign Up'}</Button>\r\n\r\n        </form>\r\n        </Container>\r\n    );\r\n});\r\n\r\nexport default Auth;"],"mappings":"8aAAA,MAAOA,MAAP,EAAeC,QAAf,CAAyBC,UAAzB,KAA0C,OAA1C,CACA,MAAO,sCAAP,CACA,OAAQC,SAAR,KAAwB,iBAAxB,CACA,OAAQC,OAAR,CAAiBC,WAAjB,CAA8BC,UAA9B,KAA+C,kBAA/C,CACA,OAAQC,WAAR,CAAqBC,kBAArB,CAAyCC,eAAzC,KAA+D,iBAA/D,CACA,OAAQC,KAAR,CAAeC,YAAf,KAAkC,iBAAlC,CACA,OAAQC,QAAR,KAAuB,iBAAvB,CACA,OAAQC,OAAR,KAAuB,UAAvB,CACA,MAAOC,OAAP,KAAmB,wBAAnB,C,wFAEA,GAAMC,KAAI,CAAGH,QAAQ,CAAC,UAAM,CACxB,gBAAeV,UAAU,CAACW,OAAD,CAAzB,CAAOG,IAAP,aAAOA,IAAP,CACA,GAAMC,SAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,QAAO,CAAGZ,UAAU,EAA1B,CACA,GAAMa,QAAO,CAAGF,QAAQ,CAACG,QAAT,GAAsBb,WAAtC,CACA,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOoB,KAAP,eAAcC,QAAd,eACA,eAAgCrB,QAAQ,CAAC,EAAD,CAAxC,yCAAOsB,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,MAAK,4FAAG,kKAGFN,OAHE,+CAIWT,MAAK,CAACW,KAAD,CAAQE,QAAR,CAJhB,QAIFG,IAJE,mEAMWf,aAAY,CAACU,KAAD,CAAQE,QAAR,CANvB,QAMFG,IANE,uBAQNV,IAAI,CAACW,OAAL,CAAaX,IAAb,EACAA,IAAI,CAACY,SAAL,CAAe,IAAf,EACAV,OAAO,CAACW,IAAR,CAAapB,eAAb,EAVM,iFAYN;AACAqB,KAAK,CAAC,YAAEC,QAAF,CAAWL,IAAX,CAAgBM,OAAjB,CAAL,CAbM,qEAAH,kBAALP,MAAK,0CAAX,CAiBA,mBACI,KAAC,SAAD,wBACA,qCACI,WAAI,SAAS,CAAC,MAAd,UAAsBN,OAAO,CAAG,OAAH,CAAa,cAA1C,EADJ,cAEI,aAAK,SAAS,CAAC,YAAf,wBACI,cAAO,OAAO,CAAC,oBAAf,2BADJ,cAEI,cAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAC,cAA9B,CAA6C,EAAE,CAAC,oBAAhD,CAAqE,mBAAiB,WAAtF,CACO,WAAW,CAAC,aADnB,CAEO,KAAK,CAAEE,KAFd,CAGO,QAAQ,CAAE,kBAAAY,CAAC,QAAIX,SAAQ,CAACW,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ,EAHlB,EAFJ,cAOQ,cAAO,EAAE,CAAC,WAAV,CAAsB,SAAS,CAAC,sBAAhC,4DAPR,GAFJ,cAYI,aAAK,SAAS,CAAC,YAAf,wBACI,cAAO,OAAO,CAAC,uBAAf,sBADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,cAAjC,CAAgD,EAAE,CAAC,uBAAnD,CAA2E,WAAW,CAAC,UAAvF,CACA,KAAK,CAAEZ,QADP,CAEA,QAAQ,CAAE,kBAAAU,CAAC,QAAIT,YAAW,CAACS,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAFX,EAFJ,GAZJ,CAoBKhB,OAAO,cACJ,4DAA0B,KAAC,OAAD,EAAS,EAAE,CAAEX,kBAAb,qBAA1B,GADI,cAGJ,sDAAoB,KAAC,OAAD,EAAS,EAAE,CAAED,WAAb,mBAApB,GAvBR,cAwBI,KAAC,MAAD,EACA,OAAO,CAAEkB,KADT,UAEEN,OAAO,CAAG,OAAH,CAAa,SAFtB,EAxBJ,GADA,EADJ,CAiCH,CA1DoB,CAArB,CA4DA,cAAeJ,KAAf"},"metadata":{},"sourceType":"module"}